import{r as e,j as s}from"./index-DPIdXvdd.js";const p=()=>{const[c,d]=e.useState(null),[h,l]=e.useState([]),[u,r]=e.useState(0),b=()=>{const t=new WebSocket("wss://ws.blockchain.info/inv");t.onopen=()=>{t.send('{"op":"unconfirmed_sub"}')},t.onmessage=o=>{const i=JSON.parse(o.data);l(a=>[...a,i.x]),r(a=>a+i.x.inputs[0].prev_out.value)},d(t)},n=e.useCallback(()=>{c&&c.close()},[c]),x=()=>{l([]),r(0)};return e.useEffect(()=>()=>{n()},[n]),s.jsxs("div",{className:"blockchain",children:[s.jsx("h1",{children:"Blockchain"}),s.jsxs("div",{className:"blockchain__buttons",children:[s.jsx("button",{className:"blockchain__button button--green",onClick:b,children:"Start"}),s.jsx("button",{className:"blockchain__button button--red",onClick:n,children:"Stop"}),s.jsx("button",{className:"blockchain__button button--yellow",onClick:x,children:"Reset"})]}),s.jsxs("p",{children:["Total price: ",u/1e8," BTC"]}),s.jsxs("table",{className:"blockchain__table",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"blockchain__table-header",children:[s.jsx("th",{children:"From"}),s.jsx("th",{children:"To"}),s.jsx("th",{children:"Sum"})]})}),s.jsx("tbody",{children:h.map((t,o)=>s.jsxs("tr",{className:"blockchain__table-row",children:[s.jsx("td",{children:t.inputs[0].prev_out.addr}),s.jsx("td",{children:t.out[0].addr}),s.jsxs("td",{children:[t.inputs[0].prev_out.value/1e8," BTC"]})]},o))})]})]})};export{p as default};
